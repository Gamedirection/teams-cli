#!/usr/bin/env bash
set -euo pipefail

SCRIPT_PATH="${BASH_SOURCE[0]}"
if command -v readlink >/dev/null 2>&1; then
  SCRIPT_PATH="$(readlink -f "$SCRIPT_PATH" 2>/dev/null || echo "$SCRIPT_PATH")"
fi
SCRIPT_DIR="$(cd "$(dirname "$SCRIPT_PATH")" && pwd)"
CACHE_DIR="$SCRIPT_DIR/.cache/go-build"
mkdir -p "$CACHE_DIR"

exec env GOCACHE="$CACHE_DIR" go run "$SCRIPT_DIR"/. "$@"
